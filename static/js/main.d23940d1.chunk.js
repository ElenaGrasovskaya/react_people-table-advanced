(this["webpackJsonpreact_people-table-advanced"]=this["webpackJsonpreact_people-table-advanced"]||[]).push([[0],{36:function(e,t,c){},37:function(e,t,c){},38:function(e,t,c){"use strict";c.r(t);var n=c(24),a=(c(33),c(34),c(8)),r=c(3),s=c(9),l=c.n(s),i=c(1),o=function(e){var t=e.isActive;return l()("navbar-item",{"has-background-grey-lighter":t})},j=function(){return Object(i.jsx)("nav",{"data-cy":"nav",className:"navbar is-fixed-top has-shadow",role:"navigation","aria-label":"main navigation",children:Object(i.jsx)("div",{className:"container",children:Object(i.jsxs)("div",{className:"navbar-brand",children:[Object(i.jsx)(a.c,{className:o,to:"/",children:"Home"}),Object(i.jsx)(a.c,{className:o,to:"/people",children:"People"})]})})})},d=(c(36),function(){return Object(i.jsxs)("div",{"data-cy":"app",children:[Object(i.jsx)(j,{}),Object(i.jsx)("main",{className:"section",children:Object(i.jsx)("div",{className:"container",children:Object(i.jsx)(r.b,{})})})]})}),b=function(){return Object(i.jsx)("h1",{className:"title",children:"Home Page"})},u=c(4),h=c(6),p=c(5),O=c(0),x=(c(37),function(){return Object(i.jsx)("div",{className:"Loader","data-cy":"loader",children:Object(i.jsx)("div",{className:"Loader__content"})})}),m="https://mate-academy.github.io/react_people-table/api/people.json";function f(e){return new Promise((function(t){return setTimeout(t,e)}))}function v(){return g.apply(this,arguments)}function g(){return(g=Object(h.a)(Object(u.a)().mark((function e(){return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",f(500).then((function(){return fetch(m)})).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var N=function(e){var t=e.person,c=Object(a.d)(),n=Object(p.a)(c,1)[0];return Object(i.jsx)(a.b,{to:"/people/".concat(t.slug,"?").concat(n.toString()),className:l()({"has-text-danger":"f"===t.sex}),children:t.name})},y=function(e){var t=e.person,c=e.people,n=c.find((function(e){return e.name===t.motherName})),a=c.find((function(e){return e.name===t.fatherName})),s=Object(r.r)().slug;return Object(i.jsxs)("tr",{"data-cy":"person",className:l()({"has-background-warning":t.slug===s}),children:[Object(i.jsx)("td",{children:Object(i.jsx)(N,{person:t})}),Object(i.jsx)("td",{children:t.sex}),Object(i.jsx)("td",{children:t.born}),Object(i.jsx)("td",{children:t.died}),Object(i.jsx)("td",{children:t.motherName?n?Object(i.jsx)(N,{person:n}):t.motherName:"-"}),Object(i.jsx)("td",{children:t.fatherName?a?Object(i.jsx)(N,{person:a}):t.fatherName:"-"})]})},w=c(7),k=function(e){var t=e.type,c=Object(a.d)(),n=Object(p.a)(c,2),r=n[0],s=n[1],l=Object(O.useState)(0),o=Object(p.a)(l,2),j=o[0],d=o[1];return Object(i.jsx)(a.b,{to:"/people?".concat(r.toString()),onClick:function(e){e.preventDefault();var c=new URLSearchParams(r);0===j&&(c.delete("order"),c.delete("sort"),d(1),c.append("sort",t)),1===j&&(d(2),c.append("order","desc")),2===j&&(d(0),c.delete("order"),c.delete("sort")),s(c)},children:Object(i.jsxs)("span",{className:"icon",children:[r.get("sort")!==t&&Object(i.jsx)("i",{className:"fas fa-sort"}),r.get("sort")===t&&"desc"!==r.get("order")&&Object(i.jsx)("i",{className:"fas fa-sort-up"}),r.get("sort")===t&&"desc"===r.get("order")&&Object(i.jsx)("i",{className:"fas fa-sort-down"})]})})},S=function(e){var t=function(e){var t=Object(a.d)(),c=Object(p.a)(t,1)[0],n=c.get("query")||"",r=c.get("sex")||"",s=c.getAll("centuries")||[],l=c.get("sort")||"",i=c.get("order")||"",o=Object(w.a)(e);if(n){var j=n.toLowerCase();o=o.filter((function(e){return e.name.toLowerCase().includes(j)}))}if(r&&(o=o.filter((function(e){return e.sex===r}))),s.length>0){var d=[];s.forEach((function(e){d=[].concat(Object(w.a)(d),Object(w.a)(o.filter((function(t){return Math.ceil(t.born/100)===+e}))))})),o=d}return l&&(o=o.sort((function(e,t){switch(l){case"born":return"desc"===i?t.born-e.born:e.born-t.born;case"died":return"desc"===i?t.died-e.died:e.died-t.died;case"name":return"desc"===i?t.name.localeCompare(e.name):e.name.localeCompare(t.name);case"sex":return"desc"===i?t.sex.localeCompare(e.sex):e.sex.localeCompare(t.sex);default:return 1}}))),o}(e.people);return Object(i.jsxs)("table",{"data-cy":"peopleTable",className:"table is-striped is-hoverable is-narrow is-fullwidth",children:[Object(i.jsx)("thead",{children:Object(i.jsxs)("tr",{children:[Object(i.jsxs)("th",{children:["Name",Object(i.jsx)(k,{type:"name"})]}),Object(i.jsxs)("th",{children:["Sex",Object(i.jsx)(k,{type:"sex"})]}),Object(i.jsxs)("th",{children:["Born",Object(i.jsx)(k,{type:"born"})]}),Object(i.jsxs)("th",{children:["Died",Object(i.jsx)(k,{type:"died"})]}),Object(i.jsx)("th",{children:"Mother"}),Object(i.jsx)("th",{children:"Father"})]})}),0===t.length?Object(i.jsx)("p",{children:"There are no people matching the current search criteria"}):Object(i.jsx)("tbody",{children:t.map((function(e){return Object(i.jsx)(y,{person:e,people:t})}))})]})},C={All:"",Male:"m",Female:"f"},L=[16,17,18,19,20],P=function(){var e=Object(a.d)(),t=Object(p.a)(e,2),c=t[0],n=t[1],r=c.get("query")||"",s=c.get("sex")||"",o=c.getAll("centuries")||[];return Object(i.jsxs)("nav",{className:"panel",children:[Object(i.jsx)("p",{className:"panel-heading",children:"Filters"}),Object(i.jsx)("p",{className:"panel-tabs","data-cy":"SexFilter",children:Object.keys(C).map((function(e){return Object(i.jsx)(a.b,{className:l()({"is-active":s===C[e]}),to:"#/people",onClick:function(t){return function(e,t){e.preventDefault();var a=new URLSearchParams(c);"All"===t?a.delete("sex"):a.set("sex",C[t]),n(a)}(t,e)},children:e},e)}))}),Object(i.jsx)("div",{className:"panel-block",children:Object(i.jsxs)("p",{className:"control has-icons-left",children:[Object(i.jsx)("input",{"data-cy":"NameFilter",type:"search",className:"input",placeholder:"Search",value:r,onChange:function(e){var t=new URLSearchParams(c);t.set("query",e.target.value),n(t)}}),Object(i.jsx)("span",{className:"icon is-left",children:Object(i.jsx)("i",{className:"fas fa-search","aria-hidden":"true"})})]})}),Object(i.jsx)("div",{className:"panel-block",children:Object(i.jsxs)("div",{className:"level is-flex-grow-1 is-mobile","data-cy":"CenturyFilter",children:[Object(i.jsx)("div",{className:"level-left",children:L.map((function(e){return Object(i.jsx)("a",{"data-cy":"century",className:l()("button mr-1",{"is-info":o.find((function(t){return+t===e}))}),href:"#/people",onClick:function(t){return function(e,t){e.preventDefault();var a=new URLSearchParams(c),r=o.includes(t.toString())?o.filter((function(e){return+e!==t})):[].concat(Object(w.a)(o),[t]);a.delete("centuries"),r.forEach((function(e){a.append("centuries",e.toString())})),n(a)}(t,e)},children:e},e)}))}),Object(i.jsx)("div",{className:"level-right ml-4",children:Object(i.jsx)("a",{"data-cy":"centuryALL",className:l()("button is-success",{"is-outlined":0!==o.length}),href:"#/people",onClick:function(){var e=new URLSearchParams(c);e.delete("centuries"),n(e)},children:"All"})})]})}),Object(i.jsx)("div",{className:"panel-block",children:Object(i.jsx)("a",{className:"button is-link is-outlined is-fullwidth",href:"#/people",children:"Reset all filters"})})]})},A=function(){var e=Object(O.useState)([]),t=Object(p.a)(e,2),c=t[0],n=t[1],a=Object(O.useState)(!1),r=Object(p.a)(a,2),s=r[0],l=r[1],o=Object(O.useState)(""),j=Object(p.a)(o,2),d=j[0],b=j[1],m=function(){var e=Object(h.a)(Object(u.a)().mark((function e(){var t;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(!0),e.prev=1,e.next=4,v();case 4:t=e.sent,n(t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),b("Something went wrong");case 11:return e.prev=11,l(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[1,8,11,14]])})));return function(){return e.apply(this,arguments)}}();return Object(O.useEffect)((function(){m()}),[]),Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("h1",{className:"title",children:"People Page"}),Object(i.jsx)("div",{className:"block",children:Object(i.jsxs)("div",{className:"box table-container",children:[Object(i.jsx)("div",{className:"column is-7-tablet is-narrow-desktop",children:Object(i.jsx)(P,{})}),s?Object(i.jsx)(x,{}):0===c.length?Object(i.jsx)("p",{"data-cy":"noPeopleMessage",children:"There are no people on the server"}):Object(i.jsx)(S,{people:c}),d&&Object(i.jsx)("p",{"data-cy":"peopleLoadingError",className:"has-text-danger",children:"Something went wrong"})]})})]})},F=function(){return Object(i.jsx)(a.a,{children:Object(i.jsx)(r.e,{children:Object(i.jsxs)(r.c,{path:"/",element:Object(i.jsx)(d,{}),children:[Object(i.jsx)(r.c,{path:"/",element:Object(i.jsx)(b,{})}),Object(i.jsx)(r.c,{path:"/home",element:Object(i.jsx)(r.a,{to:"/",replace:!1})}),Object(i.jsx)(r.c,{path:"/people",element:Object(i.jsx)(A,{})}),Object(i.jsx)(r.c,{path:"/people/:slug",element:Object(i.jsx)(A,{})}),Object(i.jsx)(r.c,{path:"*",element:Object(i.jsx)("h1",{className:"title",children:"Page not found"})})]})})})};Object(n.createRoot)(document.getElementById("root")).render(Object(i.jsx)(F,{}))}},[[38,1,2]]]);
//# sourceMappingURL=main.d23940d1.chunk.js.map